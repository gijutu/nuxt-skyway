(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{196:function(e,t,n){var content=n(212);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("e46b6ba2",content,!0,{sourceMap:!1})},197:function(e,t,n){var content=n(215);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("6759f5ab",content,!0,{sourceMap:!1})},210:function(e,t,n){e.exports=n.p+"img/95d7893.png"},211:function(e,t,n){"use strict";var o=n(196);n.n(o).a},212:function(e,t,n){(t=n(50)(!1)).push([e.i,".logo{-webkit-animation:appear 1s;animation:appear 1s;margin:auto}@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}",""]),e.exports=t},214:function(e,t,n){"use strict";var o=n(197);n.n(o).a},215:function(e,t,n){(t=n(50)(!1)).push([e.i,".container{margin:0 auto;min-height:100vh;display:flex;justify-content:center;align-items:center;text-align:center}.title{font-family:Quicksand,Source Sans Pro,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;display:block;font-weight:300;font-size:100px;color:#35495e;letter-spacing:1px}.subtitle{font-weight:300;font-size:42px;color:#526488;word-spacing:5px;padding-bottom:15px}.links{padding-top:15px}",""]),e.exports=t},216:function(e,t,n){"use strict";n.r(t);n(52);var o,l=n(19),c=(n(211),n(46)),r=Object(c.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("img",{staticClass:"logo",attrs:{src:n(210),width:"380",height:"100"}})}),[],!1,null,null,null).exports,d=n(213),v=n.n(d),m={components:{Logo:r},data:function(){return{APIKey:"ace52548-ebeb-4bb6-8940-422488a90c67",selectedAudio:"",selectedVideo:"",audios:[],videos:[],localStream:null,peerId:"",calltoid:""}},methods:{onChange:function(){""!=this.selectedAudio&&""!=this.selectedVideo&&this.connectLocalCamera()},connectLocalCamera:(o=Object(l.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={audio:!!this.selectedAudio&&{deviceId:{exact:this.selectedAudio}},video:!!this.selectedVideo&&{deviceId:{facingMode:{exact:this.selectedVideo}}}},e.next=3,navigator.mediaDevices.getUserMedia(t);case 3:n=e.sent,document.getElementById("my-video").srcObject=n,this.localStream=n;case 6:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),makeCall:function(){console.log("makeCall");var e=this.peer.call(this.calltoid,this.localStream);this.connect(e)},connect:function(e){e.on("stream",(function(e){var t=document.getElementById("their-video");t.srcObject=e,t.play()}))}},mounted:function(){var e=this;this.peer=new v.a({key:this.APIKey,debug:3}),this.peer.on("open",(function(){e.peerId=e.peer.id})),this.peer.on("call",(function(t){t.answer(e.localStream),e.connect(t)})),navigator.mediaDevices.enumerateDevices().then((function(t){for(var i=0;i!==t.length;++i){var n=t[i];"audioinput"===n.kind?e.audios.push({text:n.label||"Microphone ".concat(e.audios.length+1),value:n.deviceId}):"videoinput"===n.kind&&e.videos.push({text:n.label||"Camera  ".concat(e.videos.length-1),value:n.deviceId})}}))}},h=(n(214),Object(c.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[n("div",[n("logo"),e._v(" "),n("script",{attrs:{src:"https://embed.small.chat/TGVBYF8MDGN4476L3S.js",async:""}}),e._v(" "),n("video",{attrs:{id:"their-video",width:"300",autoplay:"",playsinline:""}}),e._v(" "),n("video",{attrs:{id:"my-video",muted:"true",width:"300",autoplay:"",playsinline:""},domProps:{muted:!0}}),e._v(" "),n("div",{staticClass:"main"},[n("h2",[e._v("manabyのビデオチャットテスト")]),e._v(" "),n("div",{staticClass:"microphone mb-1"},[e._v("\n        マイク:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedAudio,expression:"selectedAudio"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedAudio=t.target.multiple?n:n[0]},e.onChange]}},[n("option",{attrs:{disabled:"",value:""}},[e._v("マイクを選択してください")]),e._v(" "),e._l(e.audios,(function(audio,t,o){return n("option",{key:o,domProps:{value:audio.value}},[e._v("\n            "+e._s(audio.text)+"\n          ")])}))],2)]),e._v(" "),n("div",{staticClass:"camera mb-1"},[e._v("\n        カメラ:\n        "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedVideo,expression:"selectedVideo"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedVideo=t.target.multiple?n:n[0]},e.onChange]}},[n("option",{attrs:{disabled:"",value:""}},[e._v("カメラを選択してください")]),e._v(" "),e._l(e.videos,(function(video,t,o){return n("option",{key:o,domProps:{value:video.value}},[e._v("\n            "+e._s(video.text)+"\n          ")])}))],2)]),e._v(" "),n("div",[n("p",[e._v("Your id: "),n("span",{attrs:{id:"my-id"}},[e._v(e._s(e.peerId))])]),e._v(" "),n("p",[e._v("他のブラウザでこのIDをコールしましょう。")]),e._v(" "),n("h3",[e._v("コールする")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.calltoid,expression:"calltoid"}],attrs:{placeholder:"call id"},domProps:{value:e.calltoid},on:{input:function(t){t.target.composing||(e.calltoid=t.target.value)}}}),e._v(" "),n("button",{staticClass:"button--green",on:{click:e.makeCall}},[e._v("Call")])])])],1)])}),[],!1,null,null,null));t.default=h.exports}}]);